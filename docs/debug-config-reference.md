# EpicChain Debug Wizard Configuration Guide

> **Note:** This document serves as a comprehensive guide for configuring the EpicChain Debug Wizard, specifically tailored for debugging smart contracts on the EpicChain blockchain platform. This guide is designed to assist developers in understanding and utilizing various configuration settings to effectively debug their smart contracts. For detailed information on other smart contract platforms, please refer to their respective documentation.

The EpicChain Debug Wizard offers advanced execution control for smart contracts through the use of custom configuration settings specified in `launch.json`. This document provides an in-depth explanation of these settings, their purpose, and how to utilize them to optimize your debugging process.

> **Disclaimer:** Please be aware that the EpicChain Debug Wizard is currently in its preview phase. As such, you may encounter bugs or limitations during usage. We welcome any feedback regarding issues or feature requests, and encourage you to report them via our [GitHub repository](https://github.com/epic-chain/epic-debugger). Your contributions are invaluable in helping us improve the tool.

## Configuration Settings

### `program`

The `program` property specifies the absolute path to the NEF (EpicChain Execution File) that you intend to debug. It is essential that the contract manifest file (`.manifest.json`) and debug information file (`.nefbugnfo`) are located in the same directory as the NEF file. This setup ensures that all necessary files are available for accurate debugging.

**Example:**

```json
"program": "${workspaceFolder}/token-contract/bin/sc/EpicContributorTokens.nef"
```

### `invocation`

The `invocation` property defines the mechanism for invoking the smart contract. The EpicChain Debug Wizard supports several invocation methods, each suited for different debugging scenarios:

#### `invoke-operation`

This method specifies the operation within the contract to be invoked, along with the required arguments. By default, the debugger will generate a script to call the specified operation with the provided arguments from the contract defined in the `program` property. This is particularly useful for testing specific contract functions.

**Example:**

```json
"invocation": {
    "operation": "mint",
    "args": [
        "Da Hongfei",
        "Founder of EpicChain, Chair of Epic Foundation, CEO of NGD",
        "https://epicchain.org/images/discover/DaHongfei.jpg"
    ]
}
```

#### `invoke-file`

This method allows you to specify a path to a pre-existing EpicChain invoke file, which is a JSON file detailing the operation to be invoked. This is beneficial for scenarios where you have predefined invocation scripts.

**Example:**

```json
"invocation": {
    "invoke-file": "${workspaceFolder}/invoke-files/list-nft.epic-invoke.json"
}
```

#### `trace-file`

If you wish to debug transactions that were executed on a public network such as the EpicChain MainNet or TestNet, you can use a `.epic-trace` file. This file, typically generated by EpicTrace and EpicExpress, allows you to step through past transactions and analyze their execution.

**Example:**

```json
"invocation": {
    "trace-file": "${workspaceFolder}/trace-files/0x45239b3764a0973c89c1fca6bf1ef438a462f7fb705cdf7cf1739abe48328dad.epic-trace"
}
```

#### `oracle-response`

This configuration is used to simulate an oracle response callback method. It allows you to specify the `url` from which the oracle results are simulated, the `result` or `result-file` containing the response data, and other optional parameters like `code`, `callback`, `filter`, and `gas`.

**Example:**

```json
"invocation": {
    "oracle-response": {
        "url": "https://some-domain.example/some/path",
        "result-file": "${workspaceFolder}/response.json"
    }
}
```

#### `deploy`

The `deploy` configuration is used specifically for debugging the `_deploy` method of a contract. This setup is crucial when you need to test the deployment logic of your smart contract.

**Example:**

```json
"invocation": "deploy"
```

### `epic-express`

The `epic-express` property specifies the path to an EpicExpress file. This file enables you to reference accounts from the `.epic-express` file using the `@` syntax (e.g., `@alice`) instead of requiring a full EpicChain address. This is particularly useful for managing multiple accounts in a more readable format.

**Example:**

```json
"epic-express": "${workspaceFolder}/default.epic-express"
```

### `checkpoint`

The `checkpoint` property specifies the path to an EpicExpress checkpoint file. This allows the debugger to utilize real blockchain data while debugging. Note that the debugger does not modify the actual EpicExpress node; changes are kept in memory and discarded after the debugging session ends. Using a checkpoint allows you to simulate scenarios with realistic blockchain states.

**Example:**

```json
"checkpoint": "${workspaceFolder}/checkpoints/token-bought.epicxp-checkpoint"
```

### `signers`

In EpicChain, every transaction executed on the blockchain requires one or more signers. The `signers` configuration property allows you to specify the signing information for the transaction being debugged. Signers can be specified either as simple strings or as JSON objects with additional properties such as `account`, `scopes`, `allowedcontracts`, and `allowedgroups`.

**Example:**

```json
"signers": [
    "@alice",
    {
        "account": "@bob",
        "scopes": "Global"
    }
]
```

### `deploy-signer`

The `deploy-signer` property is used when deploying the latest version of the contract to the debugger stub chain. If the contract is already deployed, this property is not utilized. It provides an additional signer specifically for deployment purposes.

**Example:**

```json
"deploy-signer": "@owen"
```

### `runtime`

The `runtime` property controls the behavior of `Runtime.Trigger` and `Runtime.CheckWitness` members within the contract. The `Runtime.Trigger` can return either `TriggerType.Verification` or `TriggerType.Application`, with the default set to `TriggerType.Application`. The `Runtime.CheckWitness` function verifies if a specific account has signed the transaction, with options to override the default behavior.

**Example:**

```json
"runtime": {
    "witnesses": {
        "check-result": true
    }
}
```

### `stored-contracts`

The `stored-contracts` property specifies a list of paths to additional NEF files that your launch configuration may interact with. This property is used to load debug information for these contracts, allowing you to step through multiple contracts during debugging.

**Example:**

```json
"stored-contracts": [
    "${workspaceFolder}/store-contract/bin/sc/DemoShopContract.nef"
]
```

### `storage`

The `storage` property is used to populate the debugger's emulated storage with key/value pairs. This feature allows you to set initial values for contract storage, which is useful for testing scenarios with specific data setups. Strings prefixed with `'0x'` are interpreted as hex-encoded byte arrays.

**Example:**

```json
"storage": [
    {
        "key": "epic.org",
        "value": "Epic Foundation"
    },
    {
        "key": "0x8a6f1e4f13022b26e56e957cb8251b082f0748b1007465737361",
        "value": "0x174876e800"
    }
]
```

### `return-types`

The `return-types` property specifies the expected return type of the contract entry-point. This is particularly useful when the contract entry-point returns a strongly-typed value. Note that smart contracts compiled from high-level languages like C# typically have a single return value.

**Example:**

```json
"return-types": ["bool"]
```

### `sourceFileMap`

The `sourceFileMap` property allows you to provide optional source file mappings to the debug engine. This mapping helps in correlating source files from different environments or directories.

**Example:**

```json
"sourceFileMap": {
    "C:\\foo": "/home/user/foo"
}
```

## Conclusion

This guide provides a detailed overview of the configuration settings available in the EpicChain Debug Wizard. By understanding and utilizing these settings, you can effectively debug and test your smart contracts on the EpicChain platform. For additional support, please visit our [GitHub repository](https://github.com/epic-chain/epic-debugger) or reach out to our support team.
